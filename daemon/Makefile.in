include ../Makefile.general

.PHONY: all clean distclean

VPATH=@srcdir@
top_srcdir=@top_srcdir@

OBJECTS=node.o link.o network.o reliable_datagram.o state_flood.o \
        link_state.o protocol.o hello.o kernel_routing.o route.o udp.o \
	reliable_udp.o realtime_udp.o session.o reliable_session.o \
	multicast.o spines.o

ifeq (1, $(WIRELESS_SUPPORT))
	LOCAL_CFLAGS += -DSPINES_WIRELESS
	OBJECTS += wireless.o
endif

all: spines 

spines: $(OBJECTS)
	$(CC) $(LDFLAGS) -o spines $(OBJECTS) $(LIBS) $(EXTRALIBS)

clean:
	rm -f *.o
	rm -f *.to
	rm -f spines
	rm -f spines.exe

distclean: clean
	rm -f *~
	rm -f core*
	rm -f config.h Makefile 
